# HORMONE-Ticket

```text
  _   _  ____  _____  __  __  ____  _   _  ______ 
 | | | |/ __ \|  __ \|  \/  |/ __ \| \ | |  ____|
 | |_| | |  | | |__) | \  / | |  | |  \| | |__   
 |  _  | |  | |  _  /| |\/| | |  | | . ` |  __|  
 | | | | |__| | | \ \| |  | | |__| | |\  | |____ 
 |_| |_|\____/|_|  \_\_|  |_|\____/|_| \_|______|
                                    Ticket Monitor
```

「東北ライブハウス大作戦」eplusチケット監視・通知ツールです。
特に **マキシマム ザ ホルモン** と **10-FEET** のチケット（2026/3/10公演など）を確実に確保するために開発されました。

![Top Page](images/top_page.png)

指定されたチケットページを定期的に巡回し、販売ステータスが「受付終了」から「販売中」「受付中」などに変化した際にLINEで即座に通知します。

## 機能

- **自動監視**: 指定した間隔（デフォルト60秒）でeplusのページをチェックします。
- **LINE通知**: チケットが購入可能になった瞬間に、リンク付きの通知をLINEに送ります。
- **ログ保存**: 監視状況をCSVファイルに記録します。
- **ヘッドレスモード**: ブラウザ画面を表示せずにバックグラウンドで動作します。

## 必要要件

- Python 3.x
- Google Chrome
- LINE Notify トークン

## セットアップ

### 1. インストール

必要なライブラリをインストールします。

```bash
pip install -r requirements.txt
```

### 2. 環境変数の設定

`.env` ファイルを作成し、以下の情報を記述してください（`.env.example` はありませんが、この形式で作成してください）。

```env
LINE_CHANNEL_ACCESS_TOKEN=あなたのLINEトークン
LINE_USER_ID=あなたのユーザーID (オプション)
```

※ 現在の実装では `LINE_CHANNEL_ACCESS_TOKEN` を使用してブロードキャストまたは通知を行います。

### 3. 監視設定

`config.json` で監視対象や間隔を設定できます。

```json
{
    "check_interval": 60,  // チェック間隔（秒）
    "target_tickets": [
        {
            "id": "20260310",  // 監視するチケットID（HTMLクラス名の一部など）
            "date": "2026-03-10",
            "name": "“LIFE”2026 - Day 1",
            "keywords": [],    // 特定のキーワードで絞り込む場合（空ならすべて）
            "auto_reserve": false
        }
    ]
}
```

## 使い方

以下のコマンドで監視を開始します。

```bash
python3 monitor.py
```

実行中はログが表示され、チケットが見つかるとステータスが表示されます。停止するには `Ctrl+C` を押してください。

## ファイル構成

- `monitor.py`: メインの監視スクリプト
- `config.json`: 設定ファイル
- `.env`: 環境変数（Gitには含めないこと）
- `logs/`: 実行ログの保存先
- `chrome_data/`: Chromeのユーザーデータ（セッション維持用）

## 注意事項

- eplusのサイト構造が変更された場合、動作しなくなる可能性があります。
- 短時間に大量のアクセスを行うとIPブロックされる可能性があるため、間隔を短くしすぎないようにしてください。
